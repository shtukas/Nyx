#!/usr/bin/ruby

# encoding: UTF-8

require_relative "Libs/loader.rb"

# ----------------------------------------------------------------------------

if ARGV[0] == "search" then
    Search::searchLoop()
    exit
end

if ARGV[0] == "listings" then
    loop {
        id = LucilleCore::selectEntityFromListOfEntitiesOrNull("NxEntity", NxEntities::ids(), lambda{|id| NxEntities::idToString(id) })
        break if id.nil?
        NxEntities::landing(id)
    }
    exit
end

if ARGV[0] == "make" then
    entity = NxEntities::interactivelyCreateNewEntityOrNull()
    exit if entity.nil?
    NxEntities::landing(entity)
    exit
end

if ARGV[0] == "unique-string" then
    puts SecureRandom.hex(6)
    exit
end

str = <<HELP
usage:
    nyx search
    nyx listings
    nyx make
    nyx unique-string # Generates a unique string for type FSUniqueString
    nyx help # help display
HELP
puts str

