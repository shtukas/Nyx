#!/usr/bin/ruby

# encoding: UTF-8

require_relative "Libs/loader.rb"

# ----------------------------------------------------------------------------

loop {
    puts "-- Nyx ðŸ—º -----------------------------"

    ops = [
        "Search",
        "NxPods Listing",
        "NxNavs Listing",
        "Make new NxPod",
    ]
    operation = LucilleCore::selectEntityFromListOfEntitiesOrNull("operation", ops)
    break if operation.nil?
    if operation == "Search" then
        Space::generalSearchLoop()
    end
    if operation == "NxPods Listing" then
        loop {
            nxpod = LucilleCore::selectEntityFromListOfEntitiesOrNull("nxpod", NxPods::getNxPods(), lambda{|e| NxPods::toString(e) })
            break if nxpod.nil?
            NxPods::landing(nxpod)
        }
    end
    if operation == "NxNavs Listing" then
        loop {
            nxnav = LucilleCore::selectEntityFromListOfEntitiesOrNull("nxnav", NxNavs::getNxNavs(), lambda{|e| NxNavs::toString(e) })
            break if nxnav.nil?
            NxNavs::landing(nxnav)
        }
    end
    if operation == "Make new NxPod" then
        nxpod = NxPods::interactivelyIssueNewNxPodOrNull()
        next if nxpod.nil?
        NxPods::landing(nxpod)
    end
}
